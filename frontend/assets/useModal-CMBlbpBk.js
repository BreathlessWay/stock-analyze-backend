var $=Object.defineProperty,R=Object.defineProperties;var j=Object.getOwnPropertyDescriptors;var P=Object.getOwnPropertySymbols;var z=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable;var L=(n,e,o)=>e in n?$(n,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[e]=o,g=(n,e)=>{for(var o in e||(e={}))z.call(e,o)&&L(n,o,e[o]);if(P)for(var o of P(e))O.call(e,o)&&L(n,o,e[o]);return n},X=(n,e)=>R(n,j(e));var Y=(n,e,o)=>new Promise((c,f)=>{var r=a=>{try{s(o.next(a))}catch(d){f(d)}},t=a=>{try{s(o.throw(a))}catch(d){f(d)}},s=a=>a.done?c(a.value):Promise.resolve(a.value).then(r,t);s((o=o.apply(n,e)).next())});import{aU as N,d as q,cz as F,r as D,A as T,h,o as G,D as J,bm as K,w as y,i as k,j as H,t as V,ch as I,g as Q,aT as Z,bA as W,B as ee,n as te,d0 as oe,al as ne,H as se,d8 as ae}from"./index-BWLoIWRc.js";import{e as le}from"./index-B3oGedNJ.js";const ue=X(g({},N.props),{subBtuText:{type:String,default:"确认"},showIcon:{type:Boolean,default:!1},width:{type:Number,default:446},title:{type:String,default:""},maskClosable:{type:Boolean,default:!1},preset:{type:String,default:"dialog"}}),b=function(n,e){var o;return n.currentStyle?n.currentStyle[e]:(o=document.defaultView)==null?void 0:o.getComputedStyle(n,null)[e]},l={left:0,top:0,currentX:0,currentY:0,flag:!1},ce=function(n,e,o){const c=document.body.clientWidth,f=document.documentElement.clientHeight,r=e.offsetWidth,t=e.offsetHeight,s=e.offsetLeft,a=e.offsetTop,d=c-s-r,w=f-a-t;b(e,"left")!=="auto"&&(l.left=b(e,"left")),b(e,"top")!=="auto"&&(l.top=b(e,"top")),n.onmousedown=function(i){l.flag=!0,i||(i=window.event,n.onselectstart=function(){return!1});const p=i;l.currentX=p.clientX,l.currentY=p.clientY},document.onmouseup=function(){l.flag=!1,b(e,"left")!=="auto"&&(l.left=b(e,"left")),b(e,"top")!=="auto"&&(l.top=b(e,"top"))},document.onmousemove=function(i){const p=i||window.event;if(l.flag){const x=p.clientX,M=p.clientY,B=x-l.currentX,S=M-l.currentY;let _=parseInt(l.left)+B,m=parseInt(l.top)+S;return-_>s?_=-s:_>d&&(_=d),-m>a?m=-a:m>w&&(m=w),e.style.left=_+"px",e.style.top=m+"px",i.preventDefault&&i.preventDefault(),!1}}},ie={class:"w-full cursor-move",id:"basic-modal-bar"},me=q({__name:"basicModal",props:g({},ue),emits:["on-close","on-ok","register"],setup(n,{expose:e,emit:o}){const c=F(),f=n,r=o,t=D(null),s=D(!1),a=D(!1),d=T(()=>g(g({},f),h(t))),w=T(()=>{const{subBtuText:u}=t.value;return u||f.subBtuText});function i(u){return Y(this,null,function*(){t.value=oe(h(t)||{},u)})}const p=T(()=>g(g(g({},c),h(d)),h(t)));function x(u){a.value=u}function M(){s.value=!0,ne(()=>{const u=document.getElementById("basic-modal"),v=document.getElementById("basic-modal-bar");ce(v,u)})}function B(){s.value=!1,a.value=!1,r("on-close")}function S(){s.value=!1,r("on-close")}function _(){a.value=!0,r("on-ok")}const m={setProps:i,openModal:M,closeModal:B,setSubLoading:x};return W()&&r("register",m),e(m),(u,v)=>{const C=ee,A=te,E=N;return G(),J(E,Z({id:"basic-modal"},p.value,{show:s.value,"onUpdate:show":v[0]||(v[0]=U=>s.value=U),onClose:S}),K({header:y(()=>[Q("div",ie,V(p.value.title),1)]),default:y(()=>[I(u.$slots,"default")]),_:2},[u.$slots.action?{name:"action",fn:y(()=>[I(u.$slots,"action")]),key:"1"}:{name:"action",fn:y(()=>[k(A,null,{default:y(()=>[k(C,{onClick:B},{default:y(()=>v[1]||(v[1]=[H("取消")])),_:1}),k(C,{type:"primary",loading:a.value,onClick:_},{default:y(()=>[H(V(w.value),1)]),_:1},8,["loading"])]),_:1})]),key:"0"}]),1040,["show"])}}});function ge(n){const e=D(null),o=W(),c=()=>{const t=h(e.value);return t||console.error("useModal instance is undefined!"),t};return[t=>{le(()=>{e.value=null}),e.value=t,o==null||o.emit("register",t),se(()=>n,()=>{n&&t.setProps(ae(n))},{immediate:!0,deep:!0})},{setProps:t=>{var s;(s=c())==null||s.setProps(t)},openModal:()=>{var t;(t=c())==null||t.openModal()},closeModal:()=>{var t;(t=c())==null||t.closeModal()},setSubLoading:t=>{var s;(s=c())==null||s.setSubLoading(t)}}]}export{me as _,ge as u};
