var I=(T,k,p)=>new Promise((w,c)=>{var z=o=>{try{i(p.next(o))}catch(v){c(v)}},f=o=>{try{i(p.throw(o))}catch(v){c(v)}},i=o=>o.done?w(o.value):Promise.resolve(o.value).then(z,f);i((p=p.apply(T,k)).next())});import{d as S,o as x,f as B,g as _,r as s,u as le,a9 as ae,A as oe,a as se,L as ue,dC as ie,i as e,w as t,j as r,h as d,t as U,D as L,Z as re,dD as R,an as de,N as pe,B as _e,ab as ce,n as me,k as fe,am as ve,dE as ge,ar as ye,a4 as be,l as he,aQ as xe,aR as ke,_ as we,as as Ce}from"./index-BWLoIWRc.js";import{_ as De}from"./CreateDrawer.vue_vue_type_script_setup_true_lang-DPtB-14T.js";import{D as Te}from"./DownOutlined-7KlFnkGg.js";import{S as ze}from"./SearchOutlined-ulVSe5_9.js";import{F as Me}from"./FormOutlined-BJBCE1rA.js";const Oe={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},Ue=_("path",{d:"M120 230h496c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm0 424h496c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm784 140H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0-424H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z",fill:"currentColor"},null,-1),Be=[Ue],Ke=S({name:"AlignLeftOutlined",render:function(k,p){return x(),B("svg",Oe,Be)}}),Ne={class:"n-layout-page-header"},$e={class:"flex items-center"},Ie={class:"flex items-center"},Le={class:"w-full menu"},Re={class:"py-3 menu-list"},Se={key:0,class:"flex items-center justify-center py-4"},Fe=S({__name:"menu",setup(T){const k={label:{required:!0,message:"请输入标题",trigger:"blur"},path:{required:!0,message:"请输入路径",trigger:"blur"}},p=s(null),w=s(),c=le(),z=ae();let f=s([]),i=s([]);const o=s([]),v=s(!0),j=s(!1),M=s(!1),g=s(""),O=s(""),K=s(""),A=oe(()=>!f.value.length),H=s([{label:"添加顶级菜单",key:"home",disabled:!1},{label:"添加子菜单",key:"son",disabled:A}]),a=se({type:1,label:"",subtitle:"",path:"",auth:"",openType:1});function E(l){K.value=l==="home"?"添加顶栏菜单":`添加子菜单：${g.value}`,V()}function V(){const{openDrawer:l}=w.value;l()}function q(l){if(l.length){const n=R(d(o),l[0]);f.value=l,g.value=n.label,Object.assign(a,n),M.value=!0}else M.value=!1,f.value=[],g.value=""}function F(){z.info({title:"提示",content:"您确定想删除此权限吗?",positiveText:"确定",negativeText:"取消",onPositiveClick:()=>{c.success("删除成功")},onNegativeClick:()=>{c.error("已取消")}})}function P(){const l=R(d(o),f.value[0]);Object.assign(a,l)}function Q(){p.value.validate(l=>{l?c.error("请填写完整信息"):c.error("抱歉，您没有该权限")})}function Z(){i.value.length?i.value=[]:i.value=d(o).map(l=>l.key)}ue(()=>I(this,null,function*(){const l=yield ie(),n=l.list.map(y=>y.key);Object.assign(a,n),o.value=l.list,v.value=!1}));function G(l){i.value=l}return(l,n)=>{const y=de,C=pe,b=_e,J=ce,D=me,h=fe,W=ve,X=ge,N=ye,Y=be,m=he,$=xe,ee=ke,te=we,ne=Ce;return x(),B("div",null,[_("div",Ne,[e(y,{bordered:!1,title:"菜单权限管理"},{default:t(()=>n[6]||(n[6]=[r(" 页面数据为 Mock 示例数据，非真实数据。 ")])),_:1})]),e(ne,{class:"mt-4",cols:"1 s:1 m:1 l:3 xl:3 2xl:3",responsive:"screen","x-gap":12},{default:t(()=>[e(N,{span:"1"},{default:t(()=>[e(y,{segmented:{content:!0},bordered:!1,size:"small"},{header:t(()=>[e(D,null,{default:t(()=>[e(J,{trigger:"hover",onSelect:E,options:H.value},{default:t(()=>[e(b,{type:"info",ghost:"","icon-placement":"right"},{icon:t(()=>[_("div",$e,[e(C,{size:"14"},{default:t(()=>[e(d(Te))]),_:1})])]),default:t(()=>[n[7]||(n[7]=r(" 添加菜单 "))]),_:1})]),_:1},8,["options"]),e(b,{type:"info",ghost:"","icon-placement":"left",onClick:Z},{icon:t(()=>[_("div",Ie,[e(C,{size:"14"},{default:t(()=>[e(d(Ke))]),_:1})])]),default:t(()=>[r(" 全部"+U(d(i).length?"收起":"展开")+" ",1)]),_:1})]),_:1})]),default:t(()=>[_("div",Le,[e(h,{type:"input",value:O.value,"onUpdate:value":n[0]||(n[0]=u=>O.value=u),placeholder:"输入菜单名称搜索"},{suffix:t(()=>[e(C,{size:"18",class:"cursor-pointer"},{default:t(()=>[e(d(ze))]),_:1})]),_:1},8,["value"]),_("div",Re,[v.value?(x(),B("div",Se,[e(W,{size:"medium"})])):(x(),L(X,{key:1,"block-line":"",cascade:"",checkable:"","virtual-scroll":!0,pattern:O.value,data:o.value,expandedKeys:d(i),style:{"max-height":"650px",overflow:"hidden"},"onUpdate:selectedKeys":q,"onUpdate:expandedKeys":G},null,8,["pattern","data","expandedKeys"]))])])]),_:1})]),_:1}),e(N,{span:"2"},{default:t(()=>[e(y,{segmented:{content:!0},bordered:!1,size:"small"},{header:t(()=>[e(D,null,{default:t(()=>[e(C,{size:"18"},{default:t(()=>[e(d(Me))]),_:1}),_("span",null,"编辑菜单"+U(g.value?`：${g.value}`:""),1)]),_:1})]),default:t(()=>[e(Y,{type:"info",closable:""},{default:t(()=>n[8]||(n[8]=[r(" 从菜单列表选择一项后，进行编辑")])),_:1}),M.value?(x(),L(te,{key:0,model:a,rules:k,ref_key:"formRef",ref:p,"label-placement":"left","label-width":100,class:"py-4"},{default:t(()=>[e(m,{label:"类型",path:"type"},{default:t(()=>[_("span",null,U(a.type===1?"侧边栏菜单":""),1)]),_:1}),e(m,{label:"标题",path:"label"},{default:t(()=>[e(h,{placeholder:"请输入标题",value:a.label,"onUpdate:value":n[1]||(n[1]=u=>a.label=u)},null,8,["value"])]),_:1}),e(m,{label:"副标题",path:"subtitle"},{default:t(()=>[e(h,{placeholder:"请输入副标题",value:a.subtitle,"onUpdate:value":n[2]||(n[2]=u=>a.subtitle=u)},null,8,["value"])]),_:1}),e(m,{label:"路径",path:"path"},{default:t(()=>[e(h,{placeholder:"请输入路径",value:a.path,"onUpdate:value":n[3]||(n[3]=u=>a.path=u)},null,8,["value"])]),_:1}),e(m,{label:"打开方式",path:"openType"},{default:t(()=>[e(ee,{value:a.openType,"onUpdate:value":n[4]||(n[4]=u=>a.openType=u),name:"openType"},{default:t(()=>[e(D,null,{default:t(()=>[e($,{value:1},{default:t(()=>n[9]||(n[9]=[r("当前窗口")])),_:1}),e($,{value:2},{default:t(()=>n[10]||(n[10]=[r("新窗口")])),_:1})]),_:1})]),_:1},8,["value"])]),_:1}),e(m,{label:"菜单权限",path:"auth"},{default:t(()=>[e(h,{placeholder:"请输入权限，多个权限用，分割",value:a.auth,"onUpdate:value":n[5]||(n[5]=u=>a.auth=u)},null,8,["value"])]),_:1}),e(m,{path:"auth",style:{"margin-left":"100px"}},{default:t(()=>[e(D,null,{default:t(()=>[e(b,{type:"primary",loading:j.value,onClick:Q},{default:t(()=>n[11]||(n[11]=[r("保存修改")])),_:1},8,["loading"]),e(b,{onClick:P},{default:t(()=>n[12]||(n[12]=[r("重置")])),_:1}),e(b,{onClick:F},{default:t(()=>n[13]||(n[13]=[r("删除")])),_:1})]),_:1})]),_:1})]),_:1},8,["model"])):re("",!0)]),_:1})]),_:1})]),_:1}),e(De,{ref_key:"createDrawerRef",ref:w,title:K.value},null,8,["title"])])}}});export{Fe as default};
